<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'none'; script-src 'unsafe-eval' 'unsafe-inline' vscode-resource:; style-src vscode-resource: 'unsafe-inline';">
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        h1 {
            font-size: 46px;
            line-height: 3em;
            font-weight: normal;
        }

        li {
            width: 55vw;
            list-style: none;
            margin: 1vh;
            border-radius: 14px;
            padding: 20px;
            padding-bottom: 26px;
            cursor: pointer;
            transition: 750ms;
            overflow-x: hidden;
        }

        li:hover {
            background: #ffffff20;
            overflow-x: auto;
        }

        h2 {
            font-size: 26px;
            padding-bottom: 3px;
            font-weight: normal;
        }

        a {
            color: #0098ff;
            font-size: 16px;
            width: 100%;
            white-space: nowrap;
        }
    </style>
</head>

<body>
    <h1>Welcome</h1>
    <ul>
        <li class="projectItem">
            <h2>Webview Sample</h2>
            <a class="unexpandedPath">~/Documents/vscode-extension-samples/webview-sample/</a>
        </li>
        <li class="projectItem">
            <h2>Website</h2>
            <a class="unexpandedPath">~/Documents/website</a>
        </li>
        <li class="projectItem">
            <h2>CPSC330</h2>
            <a class="unexpandedPath">~/Documents/CS330/</a>
        </li>
        <li class="projectItem">
            <h2>Sudoku</h2>
            <a class="unexpandedPath">~/Documents/Sudoku</a>
        </li>
    </ul>

    <script>
        const vscode = acquireVsCodeApi();


        // const button = document.getElementById('project');
        // const unexpandedPath = document.getElementById('unexpandedPath').textContent;
        // button.addEventListener('click', () => {
        //     // Send a message from the WebView to the extension
        //     vscode.postMessage({
        //         command: 'openWorkspace',
        //         unexpanded_path: unexpandedPath,
        //     });
        // });

        const projectItems = document.querySelectorAll('.projectItem');
        projectItems.forEach(function (item) {
            item.addEventListener('click', function () {
                const pathElement = item.querySelector('.unexpandedPath');
                
                if (!pathElement) 
                    return;

                const unexpandedPath = pathElement.textContent;
                vscode.postMessage({
                    command: 'openWorkspace',
                    unexpanded_path: unexpandedPath,
                });

            });
        });
    </script>
</body>

</html>